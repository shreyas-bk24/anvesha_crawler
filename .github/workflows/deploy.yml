name : Deploy Anvesha to Github pages

on :
  push :
    branches :
      - main
    
permissions:
  content : read
  page : write
  id-token : write

concurrency :
  group: "pages"
  cancel-in-progress : true

jobs:
  build:
    runs-on : ubuntu-latest

    steps:
      - name : Checkout repository
        uses : actions/checkout@v4
      
      - name : Setup Node
        uses : actions/setup-node@v4
        with : 
          node-version : 18

      - name : Install dependencies
        run : npm ci

      - name : build
        run : npm run build

      - name : Upload Pages artifact
        uses : actions/upload-pages-artifact@v3
        with : 
          path : dist

  deploy : 
    needs : build
    runs-on : ubuntu-latest

    environment:
      name : github-pages
      url : ${{ steps.deployment.outputs.page_url }}

    steps : 
      - name : Deploy to Github Pages
        id : deployment
        uses : actions/deploy-pages@v4